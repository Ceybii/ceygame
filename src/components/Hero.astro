---
import { SITE_CONFIG } from '@lib/config';
---

<section class="relative min-h-[80vh] flex items-center justify-center overflow-hidden">
  <!-- Animated Background -->
  <div class="absolute inset-0 bg-gradient-to-b from-dark-bg via-dark-surface to-dark-bg">
    <div class="absolute inset-0 opacity-20">
      <div class="absolute top-1/4 left-1/4 w-96 h-96 bg-accent rounded-full blur-[128px] animate-pulse-slow"></div>
      <div class="absolute bottom-1/4 right-1/4 w-96 h-96 bg-primary-600 rounded-full blur-[128px] animate-pulse-slow" style="animation-delay: 1s;"></div>
    </div>
  </div>

  <!-- Content -->
  <div class="container mx-auto px-4 relative z-10">
    <div class="text-center animate-slide-up">
      <!-- Logo -->
      <div class="flex justify-center mb-8">
        <img src="/logo.png" alt="Ceygame" class="h-48 md:h-64 w-auto" />
      </div>

      <!-- Slogan -->
      <p class="text-xl md:text-2xl text-gray-300 mb-8 max-w-2xl mx-auto">
        FPS ve Rekabetçi Oyunlarda Profesyonel İçerikler
      </p>

      <p class="text-lg text-gray-400 mb-12 max-w-3xl mx-auto">
        Valorant, CS2 ve daha fazlasında taktikler, highlight'lar, pro stratejiler. 
        Türkiye'nin en aktif gaming topluluğuna hoş geldin!
      </p>

      <!-- CTAs -->
      <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
        <a
          href={SITE_CONFIG.social.youtube}
          target="_blank"
          rel="noopener noreferrer"
          class="group inline-flex items-center px-8 py-4 bg-red-600 hover:bg-red-700 text-white rounded-lg font-semibold text-lg transition-all hover:scale-105 shadow-lg hover:shadow-red-600/50"
        >
          <svg class="w-6 h-6 mr-3 group-hover:scale-110 transition-transform" fill="currentColor" viewBox="0 0 24 24">
            <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
          </svg>
          Abone Ol
        </a>

        <a
          href="/videos"
          class="inline-flex items-center px-8 py-4 bg-dark-surface hover:bg-dark-border border-2 border-accent text-white rounded-lg font-semibold text-lg transition-all hover:scale-105"
        >
          <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"/>
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
          </svg>
          Son Videoları İzle
        </a>
      </div>

      <!-- Stats (Otomatik YouTube'dan çekiliyor) -->
      <div id="channel-stats" class="mt-16 grid grid-cols-2 md:grid-cols-4 gap-8 max-w-4xl mx-auto">
        <!-- Loading skeleton -->
        <div class="text-center">
          <div class="text-3xl md:text-4xl font-bold text-accent mb-2 animate-pulse">...</div>
          <div class="text-gray-400">Videolar</div>
        </div>
        <div class="text-center">
          <div class="text-3xl md:text-4xl font-bold text-accent mb-2 animate-pulse">...</div>
          <div class="text-gray-400">Aboneler</div>
        </div>
        <div class="text-center">
          <div class="text-3xl md:text-4xl font-bold text-accent mb-2 animate-pulse">...</div>
          <div class="text-gray-400">Görüntülenme</div>
        </div>
        <div class="text-center">
          <div class="text-3xl md:text-4xl font-bold text-accent mb-2 animate-pulse">...</div>
          <div class="text-gray-400">Yıllık Deneyim</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Scroll Indicator -->
  <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce">
    <svg class="w-6 h-6 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"/>
    </svg>
  </div>
</section>

<script>
  import { fetchChannelStats } from '@lib/youtube';
  import { SITE_CONFIG } from '@lib/config';

  async function loadChannelStats() {
    const container = document.getElementById('channel-stats');
    if (!container) return;

    try {
      const stats = await fetchChannelStats(
        SITE_CONFIG.youtube.apiKey,
        SITE_CONFIG.youtube.channelId
      );

      if (!stats) {
        // Fallback to static values
        return;
      }

      // Update stats with real data
      container.innerHTML = `
        <div class="text-center">
          <div class="text-3xl md:text-4xl font-bold text-accent mb-2">${stats.videoCount}+</div>
          <div class="text-gray-400">Videolar</div>
        </div>
        <div class="text-center">
          <div class="text-3xl md:text-4xl font-bold text-accent mb-2">${stats.subscriberCount}+</div>
          <div class="text-gray-400">Aboneler</div>
        </div>
        <div class="text-center">
          <div class="text-3xl md:text-4xl font-bold text-accent mb-2">${stats.viewCount}+</div>
          <div class="text-gray-400">Görüntülenme</div>
        </div>
        <div class="text-center">
          <div class="text-3xl md:text-4xl font-bold text-accent mb-2">${stats.channelAge}+</div>
          <div class="text-gray-400">Yıllık Deneyim</div>
        </div>
      `;
    } catch (error) {
      console.error('Failed to load channel stats:', error);
      // Keep the loading state or show static fallback
    }
  }

  // Load stats on page load
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', loadChannelStats);
  } else {
    loadChannelStats();
  }
</script>

